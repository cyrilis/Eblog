<%- include header.ejs   %>
<div class="container">
    <% if(post){ %>
    <h2>Edit Post</h2>
    <input type="text" name="post[title]" id="post_title_outer" placeholder="Post Title" value="<%= post.title   %>" />
    <% }else{%>
    <h2>New Post</h2>
    <input type="text" name="post[title]" id="post_title_outer" placeholder="Post Title" />
    <% }   %>
    <div class="skriv-container">
        <ul class="skriv">
            <li data-id="undo" data-model="skriv.actions.undo"></li>
            <li data-id="divider"></li>
            <li data-id="bold" data-command="bold" data-tags="b,strong" data-keys="66"></li>
            <li data-id="italic" data-command="italic" data-tags="i,em" data-keys="73"></li>
            <li data-id="underline" data-command="underline" data-tags="u" data-keys="85"></li>
            <li data-id="divider"></li>
            <li data-id="align" data-model="skriv.actions.align"></li>
            <li data-id="divider"></li>
            <li data-id="ul" data-command="insertunorderedlist" data-tags="ul"></li>
            <li data-id="ol" data-command="insertorderedlist" data-tags="ol"></li>
            <li data-id="divider"></li>
            <li data-id="fontFormat" data-model="skriv.actions.fontFormat"></li>
            <li data-id="divider"></li>
            <li data-id="fontSize" data-model="skriv.actions.fontSize"></li>
            <li data-id="divider"></li>
            <li data-id="removeFormat" data-command="removeFormat"></li>
            <li data-id="divider"></li>
            <li data-id="foregroundColor" data-model="skriv.actions.foregroundColor"></li>
            <li data-id="backgroundColor" data-model="skriv.actions.backgroundColor"></li>
            <li data-id="divider"></li>
            <li data-id="link" data-model="skriv.actions.link" data-tags="a" data-keys="75"></li>
            <li data-id="unlink" data-model="skriv.actions.unlink" data-tags="a"></li>
            <li data-id="divider"></li>
            <li data-id="image" data-model="skriv.actions.image" data-tags="img" data-maxsize="5000" data-endpoint="/upload"></li>
        </ul>
    </div>

    <% if(post){   %>
    <form action="/post/<%= post.time.day+"/"+post.title %>/edit" class="clearfix" id="post" onsubmit="submitPost();return false" method="POST">
    <%}else{   %>
    <form action="/post" class="clearfix" id="post" onsubmit="submitPost();return false" method="POST">
    <%}   %>
        <div class="post clearfix" id="post_editor" contenteditable="true">
            <% if(post){   %>
            <%- post.content   %>
            <% }else{   %>
            <div><p>Page Content...</p></div>
            <%}   %>
        </div>
        <input name="post[title]" id="post_title" type="text" hidden="hidden"/>
        <textarea name="post[content]" id="post_content" hidden="hidden"></textarea>
        <input name="post[tags]" id="post_tags" type="text" hidden="hidden"/>
        <div class="form-group">
            <label for="post_tags">Tags</label>
            <span id="tags_container">
                <%if(post&&post.tags){ %>
                <%post.tags.forEach(function(tag){%><span class="tag_span"><span class="tag_name"><%= tag.tag %></span><span class="tag_close">Ã—</span></span><%}) %>
                <%}   %>
                <input id="newTag" type="text"/>
            </span>
        </div>
        <div class="form-group">
            <label for="post_category">Category</label>
            <select name="post[category]" id="post_category">
                <option value="Uncategorized">Uncategorized</option>
                <option value="Technology" <%= post&&post.category=="Technology"? ' selected="selected"':'' %>>Technology</option>
                <option value="Music"      <%= post&&post.category=="Music"? ' selected="selected"':'' %>>Music</option>
                <option value="Life"       <%= post&&post.category=="Life"? ' selected="selected"':'' %>>Life</option>
                <option value="Think"      <%= post&&post.category=="Think"? ' selected="selected"':'' %>>Think</option>
            </select>
            <% if(post){  %>
            <input type="submit" class="button pull-right" value="Update Post"/>
            <% }else{   %>
            <input type="submit" class="button pull-right" value="Create Post"/>
            <% }  %>
        </div>
    </form>
</div>
<%- include footer.ejs  %>